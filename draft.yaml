models:
  Person:
    identificationType: enum:DNI,NIF
    identificationNumber: char:9
    name: string
    surnames: string
    observations: string nullable
    relationships:
      belongsToMany: Expedient
      hasMany: Phone, Address, Email

  Collegiate:
    person_id: id foreign:Person onDelete:cascade
    birthDate: date
    nationality: string
    bankingEntity: string
    accountNumber: char:24
    college: string
    originCollege: string
    originCollegeNumber: string
    degree: enum:"Technical Architect"
    collegiateNumber: string
    specialty: string nullable
    terminationDate: date
    graduationDate: date
    careerEndET: string
    webPage: string nullable
    superiorCouncilRegNumber: string
    situation: string nullable
    relationships:
      belongsTo: Person
  
  Client:
    person_id: id foreign:Person onDelete:cascade
    agent: string nullable
    relationships:
      belongsTo: Person
  
  Expedient:
    title: string
    number: char:8
    startDate: datetime
    endDate: datetime
    description: string nullable
    site: string
    postalCode: char:5
    budget: decimal:9,2
    relationships:
      hasMany: Phase
      belongsToMany: Person
  
  Phase:
    phase: enum:000,100,200,300,310,400,450,500,550,600,620,640,700,780,800,850,900,911,920,930,940,950,960,970,980
    title: string
    expedient_id: id foreign:Expedient onDelete:restrict
    relationships:
      hasMany: Document
      belongsTo: Expedient
  
  Document:
    name: string
    type: enum:1,2,3
    phase_id: id foreign:Phase onDelete:restrict
    user_id: id foreign:User nullable onDelete:restrict
    relationships:
      belongsTo: Phase,User

  # User:
  #   relationships:
  #     hasMany: Record,Document

  Record:
    user_id: id foreign:User onDelete:restrict
    action: enum:create,update,delete,sign
    affectedTable: string
    affectedRecord_id: integer
    date: timestamp
    relationships:
      belongsTo: User

  Phone:
    person_id: id foreign:Person onDelete:cascade
    phone: char:9
    relationships:
      belongsTo: Person
  
  Address:
    person_id: id foreign:Person onDelete:cascade
    country: string nullable
    province: string nullable
    municipality: string nullable
    locality: string
    street: string
    number: tinyInteger
    postalCode: char:5
    relationships:
      belongsTo: Person
  
  Email:
    person_id: id foreign:Person onDelete:cascade
    email: string
    relationships:
      belongsTo: Person

controllers:
  Api\v1\Person:
    resource: none

  Api\v1\Collegiate:
    resource: none
  
  Api\v1\Client:
    resource: none
  
  Api\v1\Expedient:
    resource: none
  
  Api\v1\Phase:
    resource: none
  
  Api\v1\Document:
    resource: none
  
  Api\v1\Record:
    resource: none
  
  Api\v1\Phone:
    resource: none
  
  Api\v1\Address:
    resource: none
  
  Api\v1\Email:
    resource: none

seeders: Person, Collegiate, Client, Expedient, Phase, Document, Record, Phone, Address, Email