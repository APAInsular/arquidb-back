models:
  Person:
    identificationType: enum:DNI,NIF
    identificationNumber: char:9
    name: string
    firstSurname: string
    secondSurname: string nullable
    observations: string nullable
    relationships:
      belongsToMany: Expedient
      hasMany: Phone, Address, Email

  Collegiate:
    personId: id foreign:Person onDelete:cascade
    birthDate: date nullable
    nationality: string nullable
    bankingEntity: string nullable
    accountNumber: char:24 nullable
    college: string nullable
    originCollege: string nullable
    originCollegeNumber: string nullable
    degree: enum:"Technical Architect"
    collegiateNumber: string nullable
    specialty: string nullable
    terminationDate: date nullable
    graduationDate: date nullable
    careerEndET: string nullable
    webPage: string nullable
    superiorCouncilRegNumber: string nullable
    situation: string nullable
    relationships:
      belongsTo: Person
  
  Client:
    personId: id foreign:Person onDelete:cascade
    agent: string nullable
    relationships:
      belongsTo: Person
  
  Expedient:
    title: string
    number: char:8
    startDate: datetime
    endDate: datetime nullable
    description: string nullable
    site: string
    postalCode: char:5 nullable
    budget: decimal:9,2 nullable
    relationships:
      hasMany: Phase
      belongsToMany: Person
  
  Phase:
    phase: enum:000,100,200,300,310,400,450,500,550,600,620,640,700,780,800,850,900,911,920,930,940,950,960,970,980
    title: string
    expedientId: id foreign:Expedient onDelete:restrict
    relationships:
      hasMany: Document
      belongsTo: Expedient
  
  Document:
    name: string
    type: enum:1,2,3
    phaseId: id foreign:Phase onDelete:restrict
    userId: id foreign:User nullable onDelete:restrict
    relationships:
      belongsTo: Phase,User

  # User:
  #   relationships:
  #     hasMany: Record,Document

  Record:
    userId: id foreign:User onDelete:restrict
    action: enum:create,update,delete,sign
    affectedTable: string
    affectedRecordId: integer
    date: timestamp
    relationships:
      belongsTo: User

  Phone:
    personId: id foreign:Person onDelete:cascade
    phone: char:9
    relationships:
      belongsTo: Person
  
  Address:
    personId: id foreign:Person onDelete:cascade
    country: string nullable
    province: string nullable
    municipality: string nullable
    locality: string
    street: string
    number: tinyInteger
    postalCode: char:5
    relationships:
      belongsTo: Person
  
  Email:
    personId: id foreign:Person onDelete:cascade
    email: string
    relationships:
      belongsTo: Person

controllers:
  Api\v1\Person:
    resource: none

  Api\v1\Collegiate:
    resource: none
  
  Api\v1\Client:
    resource: none
  
  Api\v1\Expedient:
    resource: none
  
  Api\v1\Phase:
    resource: none
  
  Api\v1\Document:
    resource: none
  
  Api\v1\Record:
    resource: none
  
  Api\v1\Phone:
    resource: none
  
  Api\v1\Address:
    resource: none
  
  Api\v1\Email:
    resource: none

seeders: Person, Collegiate, Client, Expedient, Phase, Document, Record, Phone, Address, Email